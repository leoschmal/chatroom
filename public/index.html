<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Desafío</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="./main.js"></script>   
  </head>

  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>
    <h3>App Desafío</h3>
    <!--Aca meto la plantilla-->
    <span></span>

    <div id="parrafoMensajes"></div>

    <form onsubmit= "return addMessage(this)">
      <input type="text" id="username" placeholder="Tu Nombre" >
      <input type="text" id="texto" placeholder="Cuéntanos algo...">
      <input type="submit" value="Enviar">
    </form> 

    <script>
        const template = Handlebars.compile(`
        <h6 class="text-center m-0">Ingrese Productos</h6>        
        <div class="container mt-3 bg-secondary">
            <div class="jumbotron">      
              <br />
              <form>
                <div class="form-group">
                  <label for="title"><b>Titulo</b></label>
                  <input id="title" class="form-control" type="text" name="title" />
                </div>
                <div class="form-group">
                  <label for="price"><b>Precio</b></label>
                  <input
                    id="price"
                    class="form-control"
                    type="text"
                    name="price"
                  />
                </div>
                <div class="form-group">
                  <label for="url"><b>Url</b></label>
                  <input id="url" class="form-control" type="text" name="url" />
                </div>
                <button class="btn btn-success mt-3 mb-5">Enviar</button>
              </form>         
            </div>
          </div>
          <h6 class="text-center">Listado Productos</h6>        
                {{#if productos}}
                  <div class="table-responsive container">
                      <table class="table table-dark">
                          <tr style="color: yellow;"> <th>Producto</th> <th>Precio</th> <th>Imagen</th> </tr>
                        {{#each productos}}
                          <tr>
                              <td> {{this.title}} </td>
                              <td> {{this.price}} </td>
                              <td> <img src= {{this.url}} alt={{this.title}} width="30" height="30"></td>
                          </tr>
                          {{/each}}
                      </table>
                  </div>
              {{else}}
                <h3 style="color: black">No hay Productos</h3>
              {{/if}}
              <div id="messages"></div>
        
        `) // compila la plantilla
        
        const productos = [{"id":"1", "title":"Bicicleta","price":"$49.346.-", "url":"https://cdn2.iconfinder.com/data/icons/miscellaneous-iii-glyph-style/150/cycling-256.png"},{"id":"2", "title":"Monopatín","price":"$23.562.-", "url":"https://cdn1.iconfinder.com/data/icons/sport-fitness-vol-3-1/512/skate_rollers_rolling_street-256.png"},{"id":"3", "title":"Skate","price":"$12.365.-","url":"https://cdn0.iconfinder.com/data/icons/sport-and-fitness-1/32/Sports_and_Fitness_skate_freestyle_skating_skateboard-256.png"}]
        const html = template({productos: productos}) // genera el html 
               
        document.querySelector('span').innerHTML = html // inyecta el resultado en la vista

        
      </script>
</body>
</html>